(this["webpackJsonpmovies-explorer-frontend"]=this["webpackJsonpmovies-explorer-frontend"]||[]).push([[0],Array(19).concat([function(e,t,a){},,function(e,t,a){},,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),c=a(22),i=a.n(c),r=(a(37),a(31)),o=a(2),l=a(4),j=(a(38),Object(s.createContext)()),u=a(5),b=a(32),m=a(0),h=["component"];var d=function(e){var t=e.component,a=Object(b.a)(e,h);return Object(m.jsx)(l.b,{children:a.loggedIn?Object(m.jsx)(t,Object(u.a)({},a)):Object(m.jsx)(l.a,{to:"/"})})},_=a(3),f=a.p+"static/media/header-logo.8e581812.svg",O=(a(19),a(45),a.p+"static/media/account-link.4a3397f0.svg");a(46);var v=function(e){var t=e.onClick;return Object(m.jsx)("img",{alt:"account-icon",className:"profile__account-link",src:O,onClick:t})};var p=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("nav",{className:"navigation__container",children:[Object(m.jsx)(_.c,{to:"/movies",className:"navigation__link",activeClassName:"navigation__link_active",children:"\u0424\u0438\u043b\u044c\u043c\u044b"}),Object(m.jsx)(_.c,{to:"/saved-movies",className:"navigation__link",activeClassName:"navigation__link_active",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"})]}),Object(m.jsx)(_.c,{className:"navigation__account-link",to:"/profile",children:Object(m.jsx)(v,{})})]})};var x=function(e){var t=e.loggedIn,a=e.onMenu;return Object(m.jsxs)("header",{className:t?"header header__grid-template":"header",children:[Object(m.jsx)(_.b,{to:"/",children:Object(m.jsx)("img",{alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f movies-explorer",className:"header__logo",src:f})}),t?Object(m.jsx)(p,{}):Object(m.jsxs)("nav",{className:"header__auth-navlink-container",children:[Object(m.jsx)(_.c,{className:"header__auth-navlink",to:"/signup",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(m.jsx)(_.c,{className:"header__auth-navlink header__auth-navlink_bgcolor_black",to:"/signin",children:"\u0412\u043e\u0439\u0442\u0438"})]}),t&&Object(m.jsx)("button",{className:"header__menu-btn",type:"button",onClick:a})]})},g=(a(47),a(25)),N=a.n(g);N.a.setAppElement("#root"),console.log(n.a.version);var S=function(e){var t=e.isOpen,a=e.onClose;return Object(m.jsxs)(N.a,{isOpen:t,className:"popup__container",overlayClassName:"popup ".concat(t?"popup_opened":""),closeTimeoutMS:250,onRequestClose:a,shouldCloseOnOverlayClick:!0,children:[Object(m.jsx)("button",{className:"popup__close-btn",type:"button",onClick:a}),Object(m.jsxs)("nav",{className:"popup-navigation__container",children:[Object(m.jsx)(_.c,{exact:!0,activeClassName:"popup-navigation__link_active",to:"/",className:"popup-navigation__link",onClick:a,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(m.jsx)(_.c,{activeClassName:"popup-navigation__link_active",to:"/movies",className:"popup-navigation__link",onClick:a,children:"\u0424\u0438\u043b\u044c\u043c\u044b"}),Object(m.jsx)(_.c,{activeClassName:"popup-navigation__link_active",to:"/saved-movies",className:"popup-navigation__link",onClick:a,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"})]}),Object(m.jsx)(_.c,{to:"/profile",className:"popup-navigation__account-link",children:Object(m.jsx)(v,{onClick:a})})]})};a(57);var k=function(e){var t=e.children;return Object(m.jsx)("section",{className:"promo",children:Object(m.jsxs)("div",{className:"promo__container",children:[Object(m.jsx)("h1",{className:"promo__title",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430 \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442\u0430 \u0412\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438."}),t]})})};a(58);var M=function(){return Object(m.jsx)("nav",{className:"nav-tab",children:Object(m.jsxs)("ul",{className:"nav-tab__list",children:[Object(m.jsx)("li",{className:"nav-tab__list-item",children:Object(m.jsx)("a",{className:"nav-tab__list-link",href:"#about-project",children:"\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"})}),Object(m.jsx)("li",{className:"nav-tab__list-item",children:Object(m.jsx)("a",{className:"nav-tab__list-link",href:"#technologies",children:"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438"})}),Object(m.jsx)("li",{className:"nav-tab__list-item",children:Object(m.jsx)("a",{className:"nav-tab__list-link",href:"#about-me",children:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"})})]})})};a(59),a(60);var w=function(e){var t=e.title;return Object(m.jsx)("h2",{className:"title",children:t})};var I=function(){return Object(m.jsxs)("article",{id:"about-project",className:"about-project",children:[Object(m.jsx)(w,{title:"\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"}),Object(m.jsxs)("section",{className:"about-project__items",children:[Object(m.jsxs)("div",{className:"about-project__items-container",children:[Object(m.jsx)("h3",{className:"about-project__items-title",children:"\u0414\u0438\u043f\u043b\u043e\u043c\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u043b 5 \u044d\u0442\u0430\u043f\u043e\u0432"}),Object(m.jsx)("p",{className:"about-project__items-text",children:"\u0421\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u043d\u0430, \u0440\u0430\u0431\u043e\u0442\u0443 \u043d\u0430\u0434 \u0431\u044d\u043a\u0435\u043d\u0434\u043e\u043c, \u0432\u0451\u0440\u0441\u0442\u043a\u0443, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0438 \u0444\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0438."})]}),Object(m.jsxs)("article",{className:"about-project__items-container",children:[Object(m.jsx)("h3",{className:"about-project__items-title",children:"\u041d\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0434\u0438\u043f\u043b\u043e\u043c\u0430 \u0443\u0448\u043b\u043e 5 \u043d\u0435\u0434\u0435\u043b\u044c"}),Object(m.jsx)("p",{className:"about-project__items-text",children:"\u0423 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u044d\u0442\u0430\u043f\u0430 \u0431\u044b\u043b \u043c\u044f\u0433\u043a\u0438\u0439 \u0438 \u0436\u0451\u0441\u0442\u043a\u0438\u0439 \u0434\u0435\u0434\u043b\u0430\u0439\u043d, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0443\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u0441\u043e\u0431\u043b\u044e\u0434\u0430\u0442\u044c, \u0447\u0442\u043e\u0431\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0449\u0438\u0442\u0438\u0442\u044c\u0441\u044f."})]})]}),Object(m.jsx)("section",{className:"about-project__chart-section",children:Object(m.jsxs)("div",{className:"about-project__chart",children:[Object(m.jsxs)("div",{className:"about-project__chart-item",children:[Object(m.jsx)("p",{className:"about-project__chart-text about-project__chart-text_bgcolor_black",children:"1 \u043d\u0435\u0434\u0435\u043b\u044f"}),Object(m.jsx)("p",{className:"about-project__chart-subtext",children:"Back-end"})]}),Object(m.jsxs)("div",{className:"about-project__chart-item",children:[Object(m.jsx)("p",{className:"about-project__chart-text",children:"4 \u043d\u0435\u0434\u0435\u043b\u0438"}),Object(m.jsx)("p",{className:"about-project__chart-subtext",children:"Front-end"})]})]})})]})};a(61);var y=function(){return Object(m.jsxs)("article",{id:"technologies",className:"techs",children:[Object(m.jsx)(w,{title:"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438"}),Object(m.jsx)("section",{className:"techs-items__section",children:Object(m.jsxs)("article",{className:"techs-items",children:[Object(m.jsx)("h3",{className:"techs-items__title",children:"7 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0439"}),Object(m.jsx)("p",{className:"techs__text",children:"\u041d\u0430 \u043a\u0443\u0440\u0441\u0435 \u0432\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043c\u044b \u043e\u0441\u0432\u043e\u0438\u043b\u0438 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043b\u0438 \u0432 \u0434\u0438\u043f\u043b\u043e\u043c\u043d\u043e\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0435."})]})}),Object(m.jsx)("section",{className:"techs-icon__section",children:Object(m.jsxs)("ul",{className:"techs-list",children:[Object(m.jsx)("li",{className:"techs-list__item",children:Object(m.jsx)("a",{className:"techs-list__link",href:"https://html.com/",target:"_blank",rel:"noopener noreferrer",children:"HTML"})}),Object(m.jsx)("li",{className:"techs-list__item",children:Object(m.jsx)("a",{className:"techs-list__link",href:"https://www.w3.org/Style/CSS/",target:"_blank",rel:"noopener noreferrer",children:"CSS"})}),Object(m.jsx)("li",{className:"techs-list__item",children:Object(m.jsx)("a",{className:"techs-list__link",href:"https://www.javascript.com/",target:"_blank",rel:"noopener noreferrer",children:"JS"})}),Object(m.jsx)("li",{className:"techs-list__item",children:Object(m.jsx)("a",{className:"techs-list__link",href:"https://reactjs.org/",target:"_blank",rel:"noopener noreferrer",children:"React"})}),Object(m.jsx)("li",{className:"techs-list__item",children:Object(m.jsx)("a",{className:"techs-list__link",href:"https://git-scm.com/",target:"_blank",rel:"noopener noreferrer",children:"Git"})}),Object(m.jsx)("li",{className:"techs-list__item",children:Object(m.jsx)("a",{className:"techs-list__link",href:"https://expressjs.com/",target:"_blank",rel:"noopener noreferrer",children:"Express.js"})}),Object(m.jsx)("li",{className:"techs-list__item",children:Object(m.jsx)("a",{className:"techs-list__link",href:"https://www.mongodb.com/",target:"_blank",rel:"noopener noreferrer",children:"mongoDB"})})]})})]})},C=a.p+"static/media/about-me.485b23a9.jpg";a(62);var R=function(){return Object(m.jsxs)("article",{id:"about-me",className:"about-me",children:[Object(m.jsx)(w,{title:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"}),Object(m.jsx)("section",{className:"about-me__section",children:Object(m.jsxs)("article",{className:"about-me__info-container",children:[Object(m.jsxs)("div",{className:"about-me__text-container",children:[Object(m.jsx)("h3",{className:"about-me__info-title",children:"\u0417\u0443\u0440\u0430\u0431"}),Object(m.jsx)("h4",{className:"about-me__subtitle",children:"\u041c\u0430\u0441\u0442\u0435\u0440, 35 \u043b\u0435\u0442"}),Object(m.jsx)("p",{className:"about-me__text",children:'\u042f \u0440\u043e\u0434\u0438\u043b\u0441\u044f \u0432 \u0422\u0431\u0438\u043b\u0438\u0441\u0438  \u0438 \u0443\u0436\u0435 \u0441\u0435\u043c\u044c \u043b\u0435\u0442 \u0436\u0438\u0432\u0443 \u0432 \u0420\u043e\u0441\u0442\u043e\u0432\u0435-\u043d\u0430-\u0414\u043e\u043d\u0443. \u0417\u0430\u043a\u043e\u043d\u0447\u0438\u043b \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442 \u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0442\u0438\u043a\u0438 \u0438 \u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430\u043c\u0438. \u0416\u0435\u043d\u0430\u0442, \u0435\u0441\u0442\u044c \u0441\u044b\u043d. \u0420\u0430\u0431\u043e\u0442\u0430\u044e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043b\u0435\u0442 \u043d\u0435 \u043f\u043e \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u0438, \u043d\u043e \u0442\u0430\u043a \u043a\u0430\u043a \u043c\u0435\u043d\u044f \u0432\u0441\u0435\u0433\u0434\u0430 \u0443\u0432\u043b\u0435\u043a\u0430\u043b\u043e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435, \u0442\u043e \u0440\u0435\u0448\u0438\u043b\u0441\u044f \u043f\u0440\u043e\u0439\u0442\u0438 \u043a\u0443\u0440\u0441 "\u0412\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430" \u0432 "\u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c\u0435".'}),Object(m.jsxs)("ul",{className:"about-me__list",children:[Object(m.jsx)("li",{className:"about-me__list-item",children:Object(m.jsx)("a",{className:"about-me__list-link",href:"https://www.facebook.com/zura.bobokhidze.3",target:"_blank",rel:"noreferrer",children:"Facebook"})}),Object(m.jsx)("li",{className:"about-me__list-item",children:Object(m.jsx)("a",{className:"about-me__list-link",href:"https://github.com/zurabobo",target:"_blank",rel:"noreferrer",children:"Github"})})]})]}),Object(m.jsx)("img",{className:"about-me__image",src:C,alt:"\u043f\u043e\u0440\u0442\u0440\u0435\u0442"})]})}),Object(m.jsx)("section",{className:"about-me-portfolio__section",children:Object(m.jsxs)("div",{className:"about-me__portfolio-list-container",children:[Object(m.jsx)("h5",{className:"about-me__portfolio-title",children:"\u041f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e"}),Object(m.jsxs)("ul",{className:"about-me__portfolio-list",children:[Object(m.jsx)("li",{className:"about-me__portfolio-list-item",children:Object(m.jsxs)("a",{className:"about-me__portfolio-list-link",href:"https://github.com/zurabobo/how-to-learn",target:"_blank",rel:"noreferrer",children:["\u0421\u0442\u0430\u0442\u0438\u0447\u043d\u044b\u0439 \u0441\u0430\u0439\u0442",Object(m.jsx)("span",{className:"about-me__portfolio-list-link-icon",children:"\u2197"})]})}),Object(m.jsx)("li",{className:"about-me__portfolio-list-item",children:Object(m.jsxs)("a",{className:"about-me__portfolio-list-link",href:"https://zurabobo.github.io/russian-travel",target:"_blank",rel:"noreferrer",children:["\u0410\u0434\u0430\u043f\u0442\u0438\u0432\u043d\u044b\u0439 \u0441\u0430\u0439\u0442",Object(m.jsx)("span",{className:"about-me__portfolio-list-link-icon",children:"\u2197"})]})}),Object(m.jsx)("li",{className:"about-me__portfolio-list-item",children:Object(m.jsxs)("a",{className:"about-me__portfolio-list-link",href:"https://zb.students.nomoredomains.club",target:"_blank",rel:"noreferrer",children:["\u041e\u0434\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u0438\u0447\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435",Object(m.jsx)("span",{className:"about-me__portfolio-list-link-icon",children:"\u2197"})]})})]})]})})]})};var L=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(k,{children:Object(m.jsx)(M,{})}),Object(m.jsx)(I,{}),Object(m.jsx)(y,{}),Object(m.jsx)(R,{})]})},E=(a(63),function(){return Object(m.jsx)("div",{className:"preloader",children:Object(m.jsx)("div",{className:"preloader__container",children:Object(m.jsx)("span",{className:"preloader__round"})})})}),A=(a(64),a(65),function(e){var t=Math.floor(e/60),a=Math.floor(e%60);return"".concat(t,"\u0447 ").concat(a,"\u043c")}),U="https://api.nomoreparties.co";var F=function(e){var t=e.movie,a=e.isSavedMovies,s=e.likedMovies,n=e.onSaveMovie,c=e.onDeleteSavedMovie,i=e.buttonTitle,r=!a&&s(t),o="".concat(r?"movies-card__save-btn movies-card__saved-btn":"movies-card__save-btn");return Object(m.jsxs)("article",{className:"movies-card",children:[Object(m.jsx)("a",{href:t.trailerLink||t.trailer,target:"_blank",rel:"noopener noreferrer nofollow",children:Object(m.jsx)("img",{className:"movies-card__image",src:a?t.image:"".concat(U).concat(t.image?t.image.url:t.image),alt:t.nameRU||t.nameEN})}),a?Object(m.jsx)("button",{className:"movies-card__save-btn movies-card__delete-btn",onClick:function(){c(t)}}):Object(m.jsx)("button",{className:o,onClick:function(){n({country:t.country||"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445",director:t.director||"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445",duration:t.duration||0,year:t.year||"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445",description:t.description||"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445",image:"".concat(U).concat(t.image?t.image.url:""),trailer:t.trailerLink,thumbnail:"".concat(U).concat(t.image.formats.thumbnail.url),movieId:t.id,nameRU:t.nameRU||"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445",nameEN:t.nameEN||"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445",isSaved:t.isSaved})},children:i}),Object(m.jsxs)("div",{className:"movies-card__description",children:[Object(m.jsx)("h2",{className:"movies-card__title",children:t.nameRU||t.nameEN}),Object(m.jsx)("p",{className:"movies-card__duration",children:A(t.duration)})]})]})};a(66);var P=function(e){var t=e.onClick;return Object(m.jsx)("div",{className:"more-btn__container",children:Object(m.jsx)("button",{className:"more-btn",type:"button",onClick:t,children:"\u0415\u0449\u0451"})})},D=function(){return document.documentElement.clientWidth};var T=function(){var e=Object(s.useState)({width:D()}),t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(s.useLayoutEffect)((function(){var e=null,t=function(){clearTimeout(e),e=setTimeout((function(){n({width:D()})}),150)};return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),a};var z=function(e){var t=e.foundUserMovies,a=e.isSavedMoviesSearch,n=e.savedMovies,c=e.likedMovies,i=e.onSaveMovie,r=e.isSavedMovies,l=e.onDeleteSavedMovie,j=e.locationPathname,u=e.movies,b=Object(s.useState)([]),h=Object(o.a)(b,2),d=h[0],_=h[1],f=Object(s.useState)(!1),O=Object(o.a)(f,2),v=O[0],p=O[1],x=Object(s.useState)(0),g=Object(o.a)(x,2),N=g[0],S=g[1],k=Object(s.useState)(0),M=Object(o.a)(k,2),w=M[0],I=M[1],y=T();Object(s.useEffect)((function(){y.width>=1280?(S(12),I(3)):y.width<1280&&y.width>=768?(S(8),I(2)):y.width<768&&y.width>=320&&(S(5),I(2))}),[y.width]),Object(s.useEffect)((function(){"/movies"===j?(_(u.slice(0,N)),u.length<=N?p(!1):p(!0)):"/saved-movies"===j&&(_(u),p(!1))}),[u,N]);var C=d.map((function(e){return Object(m.jsx)("li",{children:Object(m.jsx)(F,{buttonTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",movie:e,onSaveMovie:i,likedMovies:c,isSavedMovies:r,savedMovies:n,locationPathname:j,onDeleteSavedMovie:l})},e.id||e._id)}));return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("section",{className:"movies-card-list__section",children:r?Object(m.jsx)(m.Fragment,{children:a?Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("ul",{className:"movies-card__list",children:t.map((function(e){return Object(m.jsx)("li",{children:Object(m.jsx)(F,{buttonTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",movie:e,onSaveMovie:i,likedMovies:c,isSavedMovies:r,savedMovies:n,locationPathname:j,onDeleteSavedMovie:l})},e.id||e._id)}))})}):Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("ul",{className:"movies-card__list",children:C})})}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("ul",{className:"movies-card__list",children:C}),v?Object(m.jsx)(P,{onClick:function(){_(u.slice(0,d.length+w)),d.length>=u.length-w&&p(!1)}}):null]})})})};a(67),a(21);var V=function(e){var t=e.onGetMovies,a=e.locationPathname,n=e.handleSearchSavedMovies,c=e.showSearchedMovies,i=Object(s.useState)([]),r=Object(o.a)(i,2),l=r[0],j=r[1],u=Object(s.useState)([]),b=Object(o.a)(u,2),h=b[0],d=b[1],_=Object(s.useState)(""),f=Object(o.a)(_,2),O=f[0],v=f[1],p=Object(s.useState)(!1),x=Object(o.a)(p,2),g=(x[0],x[1]);return Object(s.useEffect)((function(){g(!(!l||!h||O))}),[l,h,O]),Object(m.jsx)(m.Fragment,{children:"/movies"===a?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("form",{className:"search-form",onSubmit:function(e){e.preventDefault(),v(""),t(l),j("")},children:Object(m.jsx)("div",{className:"search-form__container",children:Object(m.jsxs)("div",{className:"search-form__input-container",children:[Object(m.jsx)("input",{className:"search-form__input",placeholder:"\u0424\u0438\u043b\u044c\u043c",type:"text",id:"search-text",name:"search",value:l,onChange:function(e){j(e.target.value),0===e.target.value.length?v("\u041d\u0443\u0436\u043d\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e"):v("")},required:!0}),Object(m.jsx)("button",{className:"search-form__submit-btn",type:"submit",children:"\u041d\u0430\u0439\u0442\u0438"})]})})}),Object(m.jsx)("p",{className:"movies-notification-message",children:O})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("form",{className:"search-form",onSubmit:function(e){e.preventDefault(),v(""),n(h),d(""),c()},children:Object(m.jsx)("div",{className:"search-form__container",children:Object(m.jsxs)("div",{className:"search-form__input-container",children:[Object(m.jsx)("input",{className:"search-form__input",placeholder:"\u0424\u0438\u043b\u044c\u043c",type:"text",id:"search-text",name:"search",value:h,onChange:function(e){d(e.target.value),0===e.target.value.length?v("\u041d\u0443\u0436\u043d\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e"):v("")},required:!0}),Object(m.jsx)("button",{className:"search-form__submit-btn",type:"submit",children:"\u041d\u0430\u0439\u0442\u0438"})]})})}),Object(m.jsx)("p",{className:"movies-notification-message",children:O})]})})};a(68);var q=function(e){var t=e.onFilter,a=e.isShortMovie;return Object(m.jsx)("section",{className:"filter__checkbox-section",children:Object(m.jsx)("div",{className:"filter__checkbox-container",children:Object(m.jsxs)("label",{className:"filter__checkbox",children:[Object(m.jsx)("input",{className:"filter__checkbox-input",type:"checkbox",id:"filter-short-movies",name:"short-movies",onChange:t,checked:a}),Object(m.jsx)("span",{className:"filter__checkbox-slider"}),"\u041a\u043e\u0440\u043e\u0442\u043a\u043e\u043c\u0435\u0442\u0440\u0430\u0436\u043a\u0438"]})})})};var J=function(e){var t=e.savedMovies,a=e.onChange,s=e.onGetMovies,n=e.likedMovies,c=e.isShortMovie,i=e.onSubmit,r=e.onFilter,o=e.isLoading,j=e.isNoMoviesFound,u=e.movies,b=e.onSaveMovie,h=Object(l.h)();return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(V,{locationPathname:h.pathname,onGetMovies:s,onSubmit:i,onChange:a}),Object(m.jsx)(q,{onFilter:r,isShortMovie:c}),o&&Object(m.jsx)(E,{}),!o&&j?Object(m.jsx)("p",{className:"movies-notification-message",children:"\u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}):Object(m.jsx)(z,{isSavedMovies:!1,likedMovies:n,isNoMoviesFound:j,movies:u,locationPathname:h.pathname,savedMovies:t,onSaveMovie:b})]})};var B=function(e){var t=e.onChange,a=e.userMovies,n=e.isSavedMoviesSearch,c=e.showSearchedMovies,i=e.handleSearchSavedMovies,r=e.foundUserMovies,o=e.isLoading,j=e.isNoMoviesFound,u=e.isNoSavedMoviesFound,b=e.isSavedMovies,h=e.movies,d=e.onDeleteSavedMovie,_=e.onFilter,f=e.isShortMovie,O=Object(l.h)();return Object(s.useEffect)((function(){a||i()}),[a]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(V,{showSearchedMovies:c,handleSearchSavedMovies:i,onChange:t}),Object(m.jsx)(q,{onFilter:_,isShortMovie:f}),o&&Object(m.jsx)(E,{}),!o&&u?Object(m.jsx)("p",{className:"movies-notification-message",children:"\u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}):Object(m.jsx)(z,{isNoMoviesFound:j,movies:h,isSavedMovies:b,isSavedMoviesSearch:n,foundUserMovies:r,locationPathname:O.pathname,onDeleteSavedMovie:d})]})},G=(a(69),a(13));function Z(){var e=Object(s.useState)({}),t=Object(o.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)({}),i=Object(o.a)(c,2),r=i[0],l=i[1],j=Object(s.useState)(!1),b=Object(o.a)(j,2),m=b[0],h=b[1],d=Object(s.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n(e),l(t),h(a)}),[n,l,h]);return{values:a,errors:r,isValid:m,handleChange:function(e){var t=e.target,s=t.name,c="checkbox"===t.type?t.checked:t.value;n(Object(u.a)(Object(u.a)({},a),{},Object(G.a)({},s,c))),l(Object(u.a)(Object(u.a)({},r),{},Object(G.a)({},s,t.validationMessage))),h(e.target.closest("form").checkValidity())},resetForm:d}}var H=function(e){var t=e.onSignOut,a=e.profileUpdateMessage,c=e.isLoading,i=e.onUpdateUser,r=e.userResStatus,l=Object(s.useContext)(j),u=Object(s.useState)(!1),b=Object(o.a)(u,2),h=b[0],d=b[1],_=Object(s.useState)(""),f=Object(o.a)(_,2),O=(f[0],f[1]),v=Object(s.useState)(!1),p=Object(o.a)(v,2),x=p[0],g=p[1],N=n.a.useState(!1),S=Object(o.a)(N,2),k=S[0],M=S[1],w=Z(),I=w.values,y=w.errors,C=w.isValid,R=w.handleChange,L=w.resetForm,A=function(){M(!k),d(!1),O("")};return Object(s.useEffect)((function(){l&&L(l)}),[l,L]),Object(s.useEffect)((function(){g(C)}),[C,I]),Object(s.useEffect)((function(){l.name===I.name&&l.email===I.email&&g(!1)}),[l,I]),Object(s.useEffect)((function(){!function(){if(r)switch(r){case 400:case 404:d(!0),O("\u041f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430");break;case 500:d(!0),O("\u041d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430");break;case 200:d(!1),O("");break;default:d(!0),O("\u041f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}}()})),Object(m.jsx)("section",{className:"profile",children:Object(m.jsxs)("form",{className:"profile-form",onSubmit:function(e){e.preventDefault(),i(I),A(),L(l)},noValidate:!0,children:[Object(m.jsx)("h1",{className:"profile-form__title",children:"\u041f\u0440\u0438\u0432\u0435\u0442, ".concat(l.name,"!")}),Object(m.jsxs)("fieldset",{className:"profile-form__fieldset",children:[Object(m.jsxs)("label",{className:"profile-form__input-label",children:["\u0418\u043c\u044f",Object(m.jsx)("input",{className:"profile-form__input",type:"text",name:"name",value:I.name||"",onChange:R,id:"name-input",minLength:"2",maxLength:"30",pattern:"^[a-zA-Z\u0430-\u044f\u0451\u0410-\u042f\u0401 -]+$",required:!0})]}),Object(m.jsx)("span",{id:"name-input-error",className:y.name?"profile-form__input-error profile-form__input-error_visible":"profile-form__input-error",children:y.name}),Object(m.jsxs)("label",{className:"profile-form__input-label",children:["Email",Object(m.jsx)("input",{className:"profile-form__input",type:"email",name:"email",value:I.email||"",onChange:R,id:"account-email",required:!0})]}),Object(m.jsx)("span",{id:"email-input-error",className:y.email?"profile-form__input-error profile-form__input-error_visible":"profile-form__input-error",children:y.email}),h&&Object(m.jsx)("span",{className:"profile-form__error-message"}),Object(m.jsx)("p",{className:"profile-data__message",children:a})]}),Object(m.jsxs)(m.Fragment,{children:[c&&Object(m.jsx)(E,{}),Object(m.jsx)("button",{type:"submit",disabled:!x,onClick:i,className:x?"profile-form__edit-btn":"profile-form__edit-btn profile-form__edit-btn_disabled",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(m.jsx)("button",{type:"submit",onClick:t,className:"profile-form__signout-btn",children:"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"})]})]})})};a(70),a(71),a(72);var $=function(e){var t=e.titleText;return Object(m.jsx)("h1",{className:"form-title",children:t})};var K=function(e){var t=e.onChange,a=e.values,n=e.errors,c=e.isValid,i=e.isLoading,r=e.isAuthErr,l=e.authErrMessage,j=e.onSubmit,u=e.titleText,b=e.children,h=e.requestLink,d=e.buttonTitle,O=Object(s.useState)("password"),v=Object(o.a)(O,2),p=v[0],x=v[1];return i?Object(m.jsx)("div",{className:"preloader-container",children:Object(m.jsx)(E,{})}):Object(m.jsx)("section",{className:"auth-form__section",children:Object(m.jsxs)("form",{className:"auth-form",onSubmit:j,noValidate:!0,children:[Object(m.jsx)(_.b,{to:"/",children:Object(m.jsx)("img",{alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f movies-explorer",className:"header__logo",src:f})}),Object(m.jsx)($,{titleText:u}),Object(m.jsxs)("fieldset",{className:"auth-form__fieldset",disabled:i,children:[b,Object(m.jsx)("label",{className:"auth-form__input-label",children:"E-mail"}),Object(m.jsx)("input",{className:"auth-form__input",type:"email",name:"email",value:a.email||"",onChange:t,id:"login-email",minLength:"2",maxLength:"30",pattern:".{2,}@.{2,}\\.[a-zA-Z]{2,6}",required:!0}),Object(m.jsx)("span",{id:"login-email-error",className:n.email?"auth-form__input-error auth-form__input-error_visible":"auth-form__input-error",children:n.email}),Object(m.jsx)("label",{className:"auth-form__input-label",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(m.jsxs)("div",{className:"auth-form__password-input-container",children:[Object(m.jsx)("input",{className:"auth-form__input",type:p,name:"password",onChange:t,id:"password",value:a.password||"",minLength:"8",maxLength:"30",required:!0}),Object(m.jsx)("button",{type:"button",className:"auth-form__password-icon auth-form__password-icon_".concat(p),onClick:function(){x("password"===p?"text":"password")},onKeyDown:function(e){return e.preventDefault}})]}),Object(m.jsx)("span",{id:"register-password-error",className:n.password?"auth-form__input-error auth-form__input-error_visible":"auth-form__input-error",children:n.password})]}),r&&Object(m.jsx)("span",{className:"auth-form__error-message",children:l}),Object(m.jsx)("button",{className:c?"auth-form__submit-btn":"auth-form__submit-btn auth-form__submit-btn_disabled",type:"submit",disabled:!c,children:d}),h]})})};var W=function(e){var t=e.onRegister,a=e.loggedIn,n=e.isLoadingRegister,c=e.regResStatus,i=Object(l.g)(),r=Object(s.useState)(!1),j=Object(o.a)(r,2),u=j[0],b=j[1],h=Object(s.useState)(""),d=Object(o.a)(h,2),f=d[0],O=d[1],v=Z(),p=v.values,x=v.errors,g=v.isValid,N=v.handleChange,S=v.resetForm;return Object(s.useEffect)((function(){a&&i.push("/")}),[i,a]),Object(s.useEffect)((function(){!function(){if(c)switch(c){case 409:b(!0),O("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c email \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d");break;case 400:b(!0),O("\u041f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430");break;case 200:b(!1),O("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"),S();break;default:b(!0),O("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c email \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d")}}()}),[c]),Object(m.jsx)("main",{className:"register",children:Object(m.jsxs)(K,{onChange:N,values:p,errors:x,isAuthErr:u,isLoading:n,authErrMessage:f,isValid:g,onSubmit:function(e){e.preventDefault(),t(p)},titleText:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!",requestLink:Object(m.jsxs)("p",{className:"auth-form__request-text",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(m.jsx)(_.b,{to:"/signin",className:"auth-form__link",children:"\u0412\u043e\u0439\u0442\u0438"})]}),buttonTitle:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",children:[Object(m.jsx)("label",{className:"auth-form__input-label",children:"\u0418\u043c\u044f"}),Object(m.jsx)("input",{className:"auth-form__input",type:"text",name:"name",id:"register-name",onChange:N,value:p.name||"",minLength:"2",maxLength:"30",pattern:"^[a-zA-Z\u0430-\u044f\u0451\u0410-\u042f\u0401 -]+$",required:!0}),Object(m.jsx)("span",{id:"name-input-error",className:x.name?"auth-form__input-error auth-form__input-error_visible":"auth-form__input-error",children:x.name})]})})};a(73);var Y=function(){return Object(m.jsxs)("footer",{className:"footer",children:[Object(m.jsx)("h2",{className:"footer__title",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c \u0445 BeatFilm."}),Object(m.jsxs)("div",{className:"footer__container",children:[Object(m.jsxs)("p",{className:"footer__text",children:["\xa9 ",(new Date).getFullYear()]}),Object(m.jsxs)("ul",{className:"footer__list",children:[Object(m.jsx)("li",{className:"footer__list-item",children:Object(m.jsx)("a",{className:"footer__list-link",href:"https://praktikum.yandex.ru/",target:"_blank",rel:"noreferrer",children:"\u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c"})}),Object(m.jsx)("li",{className:"footer__list-item",children:Object(m.jsx)("a",{className:"footer__list-link",href:"https://github.com/zurabobo",target:"_blank",rel:"noreferrer",children:"Github"})}),Object(m.jsx)("li",{className:"footer__list-item",children:Object(m.jsx)("a",{className:"footer__list-link",href:"https://www.facebook.com/zura.bobokhidze.3",target:"_blank",rel:"noreferrer",children:"Facebook"})})]})]})]})};a(74);var Q=function(e){var t=e.onLogin,a=e.loggedIn,n=e.isLoadingLogin,c=e.authResStatus,i=e.tokenResStatus,r=Object(l.g)(),j=Object(s.useState)(!1),u=Object(o.a)(j,2),b=u[0],h=u[1],d=Object(s.useState)(""),f=Object(o.a)(d,2),O=f[0],v=f[1],p=Z(),x=p.values,g=p.errors,N=p.isValid,S=p.handleChange,k=p.resetForm;return Object(s.useEffect)((function(){a&&r.push("/")}),[r,a]),Object(s.useEffect)((function(){!function(){if(i)switch(i){case 400:h(!0),v("\u041f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430");break;case 401:h(!0),v("\u041f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u043e\u043a\u0435\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0435\u043d");break;case 500:h(!0),v("\u041d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430");break;case 200:h(!1),v(""),k();break;default:h(!0),v("\u041f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430")}if(c)switch(c){case 400:case 401:h(!0),v("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c");break;case 500:h(!0),v("\u041d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430");break;case 200:h(!1),v(""),k();break;default:h(!0),v("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c")}}()}),[c,i]),Object(m.jsx)("main",{className:"login",children:Object(m.jsx)(K,{onChange:S,values:x,errors:g,isAuthErr:b,isLoading:n,authErrMessage:O,isValid:N,onSubmit:function(e){e.preventDefault(),t(x)},titleText:"\u0420\u0430\u0434\u044b \u0432\u0438\u0434\u0435\u0442\u044c!",requestLink:Object(m.jsxs)("p",{className:"auth-form__request-text",children:["\u0415\u0449\u0451 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(m.jsx)(_.b,{to:"/signup",className:"auth-form__link",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]}),buttonTitle:"\u0412\u043e\u0439\u0442\u0438"})})};a(75);var X=function(){var e=Object(l.g)();return Object(m.jsxs)("section",{className:"page-not-found",children:[Object(m.jsxs)("div",{className:"page-not-found__container",children:[Object(m.jsx)("h1",{className:"page-not-found__title",children:"404"}),Object(m.jsx)("p",{className:"page-not-found__subtitle",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"})]}),Object(m.jsx)("button",{onClick:function(){e.goBack()},className:"page-not-found__go-back-link",children:"\u041d\u0430\u0437\u0430\u0434"})]})},ee=a(15),te=a(16),ae=new(function(){function e(t){var a=t.MAIN_API_URL,s=t.headers;Object(ee.a)(this,e),this._MAIN_API_URL=a,this._headers=s}return Object(te.a)(e,[{key:"register",value:function(e){return fetch("".concat(this._MAIN_API_URL,"/signup"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,email:e.email,password:e.password})}).then(this._getResData)}},{key:"authorize",value:function(e){return fetch("".concat(this._MAIN_API_URL,"/signin"),{method:"POST",headers:this._headers,body:JSON.stringify({password:e.password,email:e.email})}).then(this._getResData)}},{key:"checkToken",value:function(e){return fetch("".concat(this._MAIN_API_URL,"/users/me"),{headers:Object(u.a)(Object(u.a)({},this._headers),{},{Authorization:"Bearer ".concat(e)})}).then(this._getResData)}},{key:"getUserInfo",value:function(e){return fetch("".concat(this._MAIN_API_URL,"/users/me"),{headers:Object(u.a)(Object(u.a)({},this._headers),{},{Authorization:"Bearer ".concat(e)})}).then(this._getResData)}},{key:"updateUserProfile",value:function(e,t){return fetch("".concat(this._MAIN_API_URL,"/users/me"),{method:"PATCH",headers:Object(u.a)(Object(u.a)({},this._headers),{},{Authorization:"Bearer ".concat(t)}),body:JSON.stringify({name:e.name,email:e.email})}).then(this._getResData)}},{key:"saveMovie",value:function(e,t){return fetch("".concat(this._MAIN_API_URL,"/movies"),{method:"POST",headers:Object(u.a)(Object(u.a)({},this._headers),{},{Authorization:"Bearer ".concat(t)}),body:JSON.stringify({country:e.country,director:e.director,duration:e.duration,year:e.year,description:e.description,image:e.image,trailer:e.trailer,thumbnail:e.thumbnail,movieId:e.movieId,nameRU:e.nameRU,nameEN:e.nameEN})}).then(this._getResData)}},{key:"getSavedMovies",value:function(e){return fetch("".concat(this._MAIN_API_URL,"/movies"),{headers:Object(u.a)(Object(u.a)({},this._headers),{},{Authorization:"Bearer ".concat(e)})}).then(this._getResData)}},{key:"deleteSavedMovie",value:function(e,t){return fetch("".concat(this._MAIN_API_URL,"/movies/").concat(e),{method:"DELETE",headers:Object(u.a)(Object(u.a)({},this._headers),{},{Authorization:"Bearer ".concat(t)})}).then(this._getResData)}},{key:"_getResData",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}}]),e}())({MAIN_API_URL:"http://localhost:3000",headers:{"Content-Type":"application/json"}}),se=new(function(){function e(t){var a=t.MOVIES_API_URL,s=t.headers;Object(ee.a)(this,e),this._MOVIES_API_URL=a,this._headers=s}return Object(te.a)(e,[{key:"_getResData",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"getMovies",value:function(){return fetch("".concat(this._MOVIES_API_URL),{headers:this._headers}).then(this._getResData)}}]),e}())({MOVIES_API_URL:"https://api.nomoreparties.co/beatfilm-movies",headers:{"Content-Type":"application/json"}});var ne=function(){var e=Object(s.useState)(localStorage.getItem("loggedIn")||!1),t=Object(o.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(!1),i=Object(o.a)(c,2),u=i[0],b=i[1],h=Object(s.useState)(!1),_=Object(o.a)(h,2),f=_[0],O=_[1],v=Object(s.useState)(!1),p=Object(o.a)(v,2),g=p[0],N=p[1],k=Object(s.useState)(!1),M=Object(o.a)(k,2),w=M[0],I=M[1],y=Object(s.useState)(!1),C=Object(o.a)(y,2),R=C[0],E=C[1],A=Object(s.useState)(!1),U=Object(o.a)(A,2),F=U[0],P=U[1],D=Object(s.useState)(!1),T=Object(o.a)(D,2),z=T[0],V=T[1],q=Object(s.useState)({}),G=Object(o.a)(q,2),Z=G[0],$=G[1],K=Object(s.useState)(""),ee=Object(o.a)(K,2),te=ee[0],ne=ee[1],ce=Object(s.useState)([]),ie=Object(o.a)(ce,2),re=ie[0],oe=ie[1],le=Object(s.useState)(!1),je=Object(o.a)(le,2),ue=je[0],be=je[1],me=Object(s.useState)([]),he=Object(o.a)(me,2),de=he[0],_e=he[1],fe=Object(s.useState)(null),Oe=Object(o.a)(fe,2),ve=Oe[0],pe=Oe[1],xe=Object(s.useState)(null),ge=Object(o.a)(xe,2),Ne=ge[0],Se=ge[1],ke=Object(s.useState)(null),Me=Object(o.a)(ke,2),we=Me[0],Ie=Me[1],ye=Object(s.useState)(null),Ce=Object(o.a)(ye,2),Re=Ce[0],Le=Ce[1],Ee=Object(s.useState)([]),Ae=Object(o.a)(Ee,2),Ue=Ae[0],Fe=Ae[1],Pe=Object(s.useState)(!1),De=Object(o.a)(Pe,2),Te=De[0],ze=De[1],Ve=Object(s.useState)(!1),qe=Object(o.a)(Ve,2),Je=qe[0],Be=qe[1],Ge=Object(s.useState)([]),Ze=Object(o.a)(Ge,2),He=Ze[0],$e=Ze[1],Ke=Object(l.g)(),We=function(){var e=localStorage.getItem("jwt");e&&ae.checkToken(e).then((function(e){n(!0),Ie(e.status),$(e)})).catch((function(e){Ie(e)}))},Ye=function(e){O(!0),ae.authorize(e).then((function(e){pe(e.status),localStorage.setItem("jwt",e.token),localStorage.setItem("loggedIn",!0),n(!0),Ke.push("/movies")})).then((function(){We()})).catch((function(e){pe(e)})).finally((function(){O(!1)}))},Qe=function(e){var t=localStorage.getItem("jwt");t&&ae.saveMovie(e,t).then((function(e){if(!e)throw new Error("\u041f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0444\u0438\u043b\u044c\u043c\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430");localStorage.setItem("userMovies",JSON.stringify(e=[e.movie].concat(Object(r.a)(re)))),oe(e)})).catch((function(e){console.log(e)}))},Xe=function(e){var t=localStorage.getItem("jwt"),a=e.id||e.movieId,s=re.find((function(e){return e.movieId===a}));ae.deleteSavedMovie(s._id,t).then((function(){var e=re.filter((function(e){return e.movieId!==a}));oe(e)})).catch((function(e){console.log(e)}))},et=function(){ze(!Te)},tt=function(e){if(0!==e.length||"undefind"!==e)return e.filter((function(e){return!Te||e.duration<=40}))};return Object(s.useEffect)((function(){if(We(),a){b(!0),E(!0);var e=localStorage.getItem("jwt");Promise.all([ae.getUserInfo(e),se.getMovies(),ae.getSavedMovies(e)]).then((function(e){var t=Object(o.a)(e,3),a=t[0],s=t[1],n=t[2];localStorage.setItem("currentUser",JSON.stringify(a)),$(a);var c=n.filter((function(e){return e.owner===a._id})).reverse();localStorage.setItem("userMovies",JSON.stringify(c)),oe(c),localStorage.setItem("movies",JSON.stringify(s)),Fe(s)})).catch((function(e){console.log(e)})).finally((function(){E(!1),b(!1)}))}}),[a]),Object(m.jsx)(j.Provider,{value:Z,children:Object(m.jsxs)("div",{className:"app",children:[Object(l.i)(["/signin","/signup"])?null:Object(m.jsx)(x,{loggedIn:a,onMenu:function(){be(!0)}}),Object(m.jsxs)(l.d,{children:[Object(m.jsx)(l.b,{exact:!0,path:"/",children:Object(m.jsx)(L,{})}),Object(m.jsx)(d,{path:"/movies",component:J,loggedIn:a,onGetMovies:function(e){var t=new RegExp(e,"gi"),a=Ue.filter((function(e){return t.test(e.nameRU)||t.test(e.nameEN)}));if(0===a.length)P(!0);else{P(!1);var s=a.map((function(e){return e.isSaved=re.some((function(t){return t.movieId===e.id})),e}));_e(s),localStorage.setItem("sortedMovies",JSON.stringify(s))}},onSaveMovie:function(e){e.isSaved?Xe(e):Qe(e)},movies:tt(de),isShortMovie:Te,savedMovies:re,likedMovies:function(e){return e.isSaved=re.some((function(t){return t.movieId===e.id}))},isLoading:R,isNoMoviesFound:F,onFilter:et,buttonTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",userMovies:re}),Object(m.jsx)(d,{path:"/saved-movies",component:B,isLoading:R,movies:tt(re),isNoSavedMoviesFound:z,isShortMovie:Te,handleSearchSavedMovies:function(e){V(!1);var t=new RegExp(e,"gi"),a=re.filter((function(e){return t.test(e.nameRU)||t.test(e.nameEN)}));0===a.length?V(!0):V(!1),$e(a)},showSearchedMovies:function(){Be(!0)},loggedIn:a,onDeleteSavedMovie:function(e){Xe(e)},onFilter:et,isSavedMovies:!0,isSavedMoviesSearch:Je,foundUserMovies:He}),Object(m.jsx)(d,{path:"/profile",component:H,loggedIn:a,isLoading:w,onUpdateUser:function(e){var t=localStorage.getItem("jwt");t&&(I(!0),ae.updateUserProfile(e,t).then((function(e){$(e),ne("\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b"),Le(e.status),localStorage.setItem("currentUser",JSON.stringify(e))})).catch((function(e){Le(e)})).finally((function(){I(!1)})))},profileUpdateMessage:te,onSignOut:function(e){e.preventDefault(),localStorage.clear(),n(!1),oe([]),_e([]),$({}),Ke.push("/")},userResStatus:Re}),Object(m.jsx)(l.b,{path:"/signup",children:Object(m.jsx)(W,{loggedIn:a,onRegister:function(e){N(!0),ae.register(e).then((function(t){Se(t.status),Ye({email:e.email,password:e.password})})).catch((function(e){Se(e)})).finally((function(){N(!1)}))},authResStatus:ve,regResStatus:Ne,isLoadingRegister:g||u||f})}),Object(m.jsx)(l.b,{path:"/signin",children:Object(m.jsx)(Q,{loggedIn:a,onLogin:Ye,authResStatus:ve,tokenResStatus:we,isLoadingLogin:f||u||g})}),Object(m.jsx)(l.b,{path:"*",children:Object(m.jsx)(X,{})})]}),Object(l.i)(["/signin","/signup","/profile"])?null:Object(m.jsx)(Y,{}),ue&&Object(m.jsx)(S,{isOpen:ue,onClose:function(){be(!1)}})]})})};i.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(_.a,{children:Object(m.jsx)(ne,{})})}),document.getElementById("root"))}]),[[76,1,2]]]);
//# sourceMappingURL=main.1a98736c.chunk.js.map